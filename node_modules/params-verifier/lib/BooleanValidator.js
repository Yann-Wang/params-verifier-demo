'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _Err = require('./Err');

var _ValidatorBase2 = require('./ValidatorBase');

var _ValidatorBase3 = _interopRequireDefault(_ValidatorBase2);

var _dataType = require('./dataType');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var BooleanValidator = function (_ValidatorBase) {
    (0, _inherits3.default)(BooleanValidator, _ValidatorBase);

    function BooleanValidator(data, options) {
        (0, _classCallCheck3.default)(this, BooleanValidator);

        var _this = (0, _possibleConstructorReturn3.default)(this, (BooleanValidator.__proto__ || (0, _getPrototypeOf2.default)(BooleanValidator)).call(this));

        _this.type = 'boolean';
        _this.value = data;
        _this.options = options || {};
        return _this;
    }

    (0, _createClass3.default)(BooleanValidator, [{
        key: 'singleField',
        value: function singleField(name, options) {
            this.currentFieldInfo = this.fetchFieldInfo(name, this.value, this.type, options);
            this.validate();
        }
    }, {
        key: 'checkOptionsParamsSupport',
        value: function checkOptionsParamsSupport() {
            this.checkOptionsRequired();
        }
    }, {
        key: 'startValidateProcedure',
        value: function startValidateProcedure() {
            this.tryCastType();
            this.verifyType();
        }
    }, {
        key: 'tryCastType',
        value: function tryCastType() {
            var value = this.currentFieldInfo.value;


            if (typeof value === 'string' && ['true', 'false'].indexOf(value) > -1) {
                this.currentFieldInfo.value = value === 'true';
            }
        }
    }, {
        key: 'verifyType',
        value: function verifyType() {
            var _currentFieldInfo = this.currentFieldInfo,
                value = _currentFieldInfo.value,
                name = _currentFieldInfo.name;


            if (!(0, _dataType.isBool)(value)) {
                throw new _Err.ParamsError('the type of ' + name + ' is not boolean.');
            }
        }
    }]);
    return BooleanValidator;
}(_ValidatorBase3.default);

exports.default = BooleanValidator;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9Cb29sZWFuVmFsaWRhdG9yLmpzIl0sIm5hbWVzIjpbIkJvb2xlYW5WYWxpZGF0b3IiLCJkYXRhIiwib3B0aW9ucyIsInR5cGUiLCJ2YWx1ZSIsIm5hbWUiLCJjdXJyZW50RmllbGRJbmZvIiwiZmV0Y2hGaWVsZEluZm8iLCJ2YWxpZGF0ZSIsImNoZWNrT3B0aW9uc1JlcXVpcmVkIiwidHJ5Q2FzdFR5cGUiLCJ2ZXJpZnlUeXBlIiwiaW5kZXhPZiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNBOzs7O0lBRXFCQSxnQjs7O0FBQ2pCLDhCQUFZQyxJQUFaLEVBQWtCQyxPQUFsQixFQUEyQjtBQUFBOztBQUFBOztBQUd2QixjQUFLQyxJQUFMLEdBQVksU0FBWjtBQUNBLGNBQUtDLEtBQUwsR0FBYUgsSUFBYjtBQUNBLGNBQUtDLE9BQUwsR0FBZUEsV0FBVyxFQUExQjtBQUx1QjtBQU0xQjs7OztvQ0FFV0csSSxFQUFNSCxPLEVBQVM7QUFDdkIsaUJBQUtJLGdCQUFMLEdBQXdCLEtBQUtDLGNBQUwsQ0FBb0JGLElBQXBCLEVBQTBCLEtBQUtELEtBQS9CLEVBQXNDLEtBQUtELElBQTNDLEVBQWlERCxPQUFqRCxDQUF4QjtBQUNBLGlCQUFLTSxRQUFMO0FBQ0g7OztvREFFMkI7QUFDeEIsaUJBQUtDLG9CQUFMO0FBQ0g7OztpREFFd0I7QUFDckIsaUJBQUtDLFdBQUw7QUFDQSxpQkFBS0MsVUFBTDtBQUNIOzs7c0NBRWE7QUFBQSxnQkFDRlAsS0FERSxHQUNRLEtBQUtFLGdCQURiLENBQ0ZGLEtBREU7OztBQUdWLGdCQUFJLE9BQU9BLEtBQVAsS0FBaUIsUUFBakIsSUFDRyxDQUFDLE1BQUQsRUFBUyxPQUFULEVBQWtCUSxPQUFsQixDQUEwQlIsS0FBMUIsSUFBbUMsQ0FBQyxDQUQzQyxFQUM4QztBQUMxQyxxQkFBS0UsZ0JBQUwsQ0FBc0JGLEtBQXRCLEdBQThCQSxVQUFVLE1BQXhDO0FBQ0g7QUFDSjs7O3FDQUVZO0FBQUEsb0NBQ2UsS0FBS0UsZ0JBRHBCO0FBQUEsZ0JBQ0RGLEtBREMscUJBQ0RBLEtBREM7QUFBQSxnQkFDTUMsSUFETixxQkFDTUEsSUFETjs7O0FBR1QsZ0JBQUksQ0FBQyxzQkFBT0QsS0FBUCxDQUFMLEVBQW9CO0FBQ2hCLHNCQUFNLHNDQUErQkMsSUFBL0Isc0JBQU47QUFDSDtBQUNKOzs7OztrQkF0Q2dCTCxnQiIsImZpbGUiOiJCb29sZWFuVmFsaWRhdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFyYW1zRXJyb3IgfSBmcm9tICcuL0Vycic7XG5pbXBvcnQgVmFsaWRhdG9yQmFzZSBmcm9tICcuL1ZhbGlkYXRvckJhc2UnO1xuaW1wb3J0IHsgaXNCb29sIH0gZnJvbSAnLi9kYXRhVHlwZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvb2xlYW5WYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3JCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy50eXBlID0gJ2Jvb2xlYW4nO1xuICAgICAgICB0aGlzLnZhbHVlID0gZGF0YTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB9XG5cbiAgICBzaW5nbGVGaWVsZChuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEZpZWxkSW5mbyA9IHRoaXMuZmV0Y2hGaWVsZEluZm8obmFtZSwgdGhpcy52YWx1ZSwgdGhpcy50eXBlLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSgpO1xuICAgIH1cblxuICAgIGNoZWNrT3B0aW9uc1BhcmFtc1N1cHBvcnQoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tPcHRpb25zUmVxdWlyZWQoKTtcbiAgICB9XG5cbiAgICBzdGFydFZhbGlkYXRlUHJvY2VkdXJlKCkge1xuICAgICAgICB0aGlzLnRyeUNhc3RUeXBlKCk7XG4gICAgICAgIHRoaXMudmVyaWZ5VHlwZSgpO1xuICAgIH1cblxuICAgIHRyeUNhc3RUeXBlKCkge1xuICAgICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLmN1cnJlbnRGaWVsZEluZm87XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICYmIFsndHJ1ZScsICdmYWxzZSddLmluZGV4T2YodmFsdWUpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpZWxkSW5mby52YWx1ZSA9IHZhbHVlID09PSAndHJ1ZSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2ZXJpZnlUeXBlKCkge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBuYW1lIH0gPSB0aGlzLmN1cnJlbnRGaWVsZEluZm87XG5cbiAgICAgICAgaWYgKCFpc0Jvb2wodmFsdWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGFyYW1zRXJyb3IoYHRoZSB0eXBlIG9mICR7bmFtZX0gaXMgbm90IGJvb2xlYW4uYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=